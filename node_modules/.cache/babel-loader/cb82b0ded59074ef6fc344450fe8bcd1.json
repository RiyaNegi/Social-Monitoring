{"ast":null,"code":"import t from \"lodash.debounce\";\nimport n, { useRef as r, useState as e, useEffect as o } from \"react\";\nimport { select as a, event as i } from \"d3-selection\";\nimport u from \"resize-observer-polyfill\";\nimport \"d3-transition\";\nimport { range as f, min as l, max as s, descending as c } from \"d3-array\";\nimport h from \"d3-cloud\";\nimport d from \"lodash.clonedeep\";\nimport m from \"seedrandom\";\nimport y from \"tippy.js\";\nimport { dispatch as p } from \"d3-dispatch\";\nimport { scaleOrdinal as x, scaleLinear as v, scaleSqrt as g, scaleLog as b } from \"d3-scale\";\nimport { schemeCategory10 as w } from \"d3-scale-chromatic\";\n\nfunction M() {\n  return (M = Object.assign || function (t) {\n    for (var n = 1; n < arguments.length; n++) {\n      var r = arguments[n];\n\n      for (var e in r) Object.prototype.hasOwnProperty.call(r, e) && (t[e] = r[e]);\n    }\n\n    return t;\n  }).apply(this, arguments);\n}\n\nvar z = Math.PI / 180;\n\nfunction k(t) {\n  return t.text;\n}\n\nfunction W() {\n  return \"serif\";\n}\n\nfunction S() {\n  return \"normal\";\n}\n\nfunction O(t) {\n  return Math.sqrt(t.value);\n}\n\nfunction T() {\n  return 30 * (~~(6 * Math.random()) - 3);\n}\n\nfunction j() {\n  return 1;\n}\n\nfunction A(t, n, r, e) {\n  if (!n.sprite) {\n    var o = t.context,\n        a = t.ratio;\n    o.clearRect(0, 0, 2048 / a, 2048 / a);\n    var i = 0,\n        u = 0,\n        f = 0,\n        l = r.length;\n\n    for (--e; ++e < l;) {\n      n = r[e], o.save(), o.font = n.style + \" \" + n.weight + \" \" + ~~((n.size + 1) / a) + \"px \" + n.font;\n      var s = o.measureText(n.text + \"m\").width * a,\n          c = n.size << 1;\n\n      if (n.rotate) {\n        var h = Math.sin(n.rotate * z),\n            d = Math.cos(n.rotate * z),\n            m = s * d,\n            y = s * h,\n            p = c * d,\n            x = c * h;\n        s = Math.max(Math.abs(m + x), Math.abs(m - x)) + 31 >> 5 << 5, c = ~~Math.max(Math.abs(y + p), Math.abs(y - p));\n      } else s = s + 31 >> 5 << 5;\n\n      if (c > f && (f = c), i + s >= 2048 && (i = 0, u += f, f = 0), u + c >= 2048) break;\n      o.translate((i + (s >> 1)) / a, (u + (c >> 1)) / a), n.rotate && o.rotate(n.rotate * z), o.fillText(n.text, 0, 0), n.padding && (o.lineWidth = 2 * n.padding, o.strokeText(n.text, 0, 0)), o.restore(), n.width = s, n.height = c, n.xoff = i, n.yoff = u, n.x1 = s >> 1, n.y1 = c >> 1, n.x0 = -n.x1, n.y0 = -n.y1, n.hasText = !0, i += s;\n    }\n\n    for (var v = o.getImageData(0, 0, 2048 / a, 2048 / a).data, g = []; --e >= 0;) if ((n = r[e]).hasText) {\n      for (var b = (s = n.width) >> 5, w = (c = n.y1 - n.y0, 0); w < c * b; w++) g[w] = 0;\n\n      if (null == (i = n.xoff)) return;\n      u = n.yoff;\n\n      for (var M = 0, k = -1, W = 0; W < c; W++) {\n        for (w = 0; w < s; w++) {\n          var S = v[2048 * (u + W) + (i + w) << 2] ? 1 << 31 - w % 32 : 0;\n          g[b * W + (w >> 5)] |= S, M |= S;\n        }\n\n        M ? k = W : (n.y0++, c--, W--, u++);\n      }\n\n      n.y1 = n.y0 + k, n.sprite = g.slice(0, (n.y1 - n.y0) * b);\n    }\n  }\n}\n\nfunction I(t, n, r) {\n  for (var e, o = t.sprite, a = t.width >> 5, i = t.x - (a << 4), u = 127 & i, f = 32 - u, l = t.y1 - t.y0, s = (t.y + t.y0) * (r >>= 5) + (i >> 5), c = 0; c < l; c++) {\n    e = 0;\n\n    for (var h = 0; h <= a; h++) if ((e << f | (h < a ? (e = o[c * a + h]) >>> u : 0)) & n[s + h]) return !0;\n\n    s += r;\n  }\n\n  return !1;\n}\n\nfunction q(t, n) {\n  var r = t[0],\n      e = t[1];\n  n.x + n.x0 < r.x && (r.x = n.x + n.x0), n.y + n.y0 < r.y && (r.y = n.y + n.y0), n.x + n.x1 > e.x && (e.x = n.x + n.x1), n.y + n.y1 > e.y && (e.y = n.y + n.y1);\n}\n\nfunction E(t) {\n  var n = t[0] / t[1];\n  return function (t) {\n    return [n * (t *= .1) * Math.cos(t), t * Math.sin(t)];\n  };\n}\n\nfunction C() {\n  return document.createElement(\"canvas\");\n}\n\nfunction D(t) {\n  return \"function\" == typeof t ? t : function () {\n    return t;\n  };\n}\n\nvar F = {\n  archimedean: E,\n  rectangular: function (t) {\n    var n = 4 * t[0] / t[1],\n        r = 0,\n        e = 0;\n    return function (t) {\n      var o = t < 0 ? -1 : 1;\n\n      switch (Math.sqrt(1 + 4 * o * t) - o & 3) {\n        case 0:\n          r += n;\n          break;\n\n        case 1:\n          e += 4;\n          break;\n\n        case 2:\n          r -= n;\n          break;\n\n        default:\n          e -= 4;\n      }\n\n      return [r, e];\n    };\n  }\n};\n\nfunction P(t, n) {\n  return t[Math.floor(n() * t.length)];\n}\n\nfunction L(t) {\n  return t.size + \"px\";\n}\n\nfunction N(t) {\n  return t.text;\n}\n\nfunction R(t) {\n  return \"translate(\" + t.x + \", \" + t.y + \")\" + (\"number\" == typeof t.rotate ? \"rotate(\" + t.rotate + \")\" : \"\");\n}\n\nfunction U(t) {\n  var n,\n      r = t.callbacks,\n      e = t.maxWords,\n      o = t.options,\n      a = t.selection,\n      u = t.size,\n      f = o.deterministic,\n      x = o.enableOptimizations,\n      w = o.fontFamily,\n      z = o.fontStyle,\n      U = o.fontSizes,\n      H = o.fontWeight,\n      B = o.padding,\n      G = o.randomSeed,\n      J = o.rotations,\n      K = o.rotationAngles,\n      Q = o.spiral,\n      V = o.scale,\n      X = t.words.concat().sort(function (t, n) {\n    return c(t.value, n.value);\n  }).slice(0, e),\n      Y = m(f ? G || \"deterministic\" : null);\n  (n = x ? function () {\n    var t = [256, 256],\n        n = k,\n        r = W,\n        e = O,\n        o = S,\n        a = S,\n        i = T,\n        u = j,\n        f = E,\n        l = [],\n        s = Infinity,\n        c = p(\"word\", \"end\"),\n        h = Math.random,\n        d = {},\n        m = C,\n        y = !1;\n\n    function x(n, r, e) {\n      for (var o, a, i, u, l, s = r.x, c = r.y, d = Math.sqrt(t[0] * t[0] + t[1] * t[1]), m = f(t), y = h() < .5 ? 1 : -1, p = -y; (o = m(p += y)) && (a = ~~o[0], i = ~~o[1], !(Math.min(Math.abs(a), Math.abs(i)) >= d));) if (r.x = s + a, r.y = c + i, !(r.x + r.x0 < 0 || r.y + r.y0 < 0 || r.x + r.x1 > t[0] || r.y + r.y1 > t[1] || e && I(r, n, t[0]) || e && !((u = r).x + u.x1 > (l = e)[0].x && u.x + u.x0 < l[1].x && u.y + u.y1 > l[0].y && u.y + u.y0 < l[1].y))) {\n        for (var x, v = r.sprite, g = r.width >> 5, b = t[0] >> 5, w = r.x - (g << 4), M = 127 & w, z = 32 - M, k = r.y1 - r.y0, W = (r.y + r.y0) * b + (w >> 5), S = 0; S < k; S++) {\n          x = 0;\n\n          for (var O = 0; O <= g; O++) n[W + O] |= x << z | (O < g ? (x = v[S * g + O]) >>> M : 0);\n\n          W += b;\n        }\n\n        return delete r.sprite, !0;\n      }\n\n      return !1;\n    }\n\n    return d.canvas = function (t) {\n      return arguments.length ? (m = D(t), d) : m;\n    }, d.start = function () {\n      var f = function (t) {\n        t.width = t.height = 1;\n        var n = Math.sqrt(t.getContext(\"2d\").getImageData(0, 0, 1, 1).data.length >> 2);\n        t.width = 2048 / n, t.height = 2048 / n;\n        var r = t.getContext(\"2d\");\n        return r.fillStyle = r.strokeStyle = \"red\", r.textAlign = \"center\", {\n          context: r,\n          ratio: n\n        };\n      }(m()),\n          s = new Uint32Array((t[0] >> 5) * t[1]),\n          p = null,\n          v = [],\n          g = l.map(function (t, f) {\n        return t.text = n.call(this, t, f), t.font = r.call(this, t, f), t.style = o.call(this, t, f), t.weight = a.call(this, t, f), t.rotate = i.call(this, t, f), t.size = ~~e.call(this, t, f), t.padding = u.call(this, t, f), t;\n      }).sort(function (t, n) {\n        return n.size - t.size;\n      });\n\n      return setTimeout(function () {\n        return function n(r) {\n          var e = 50 * r,\n              o = Math.min(50 * (r + 1), l.length);\n          !function (n, r) {\n            for (var e = n; e < r; e += 1) {\n              var o = g[e];\n              o.x = t[0] * (h() + .5) >> 1, o.y = t[1] * (h() + .5) >> 1, A(f, o, g, e), o.hasText && x(s, o, p) && (v.push(o), c.call(\"word\", d, o), p ? q(p, o) : p = [{\n                x: o.x + o.x0,\n                y: o.y + o.y0\n              }, {\n                x: o.x + o.x1,\n                y: o.y + o.y1\n              }], o.x -= t[0] >> 1, o.y -= t[1] >> 1);\n            }\n          }(e, o), y || (o < l.length ? setTimeout(function () {\n            return n(r + 1);\n          }, 0) : (d.stop(), c.call(\"end\", d, v, p)));\n        }(0);\n      }, 0), d;\n    }, d.revive = function () {\n      return y = !1, d;\n    }, d.stop = function () {\n      return y = !0, d;\n    }, d.timeInterval = function (t) {\n      return arguments.length ? (s = null == t ? Infinity : t, d) : s;\n    }, d.words = function (t) {\n      return arguments.length ? (l = t, d) : l;\n    }, d.size = function (n) {\n      return arguments.length ? (t = [+n[0], +n[1]], d) : t;\n    }, d.font = function (t) {\n      return arguments.length ? (r = D(t), d) : r;\n    }, d.fontStyle = function (t) {\n      return arguments.length ? (o = D(t), d) : o;\n    }, d.fontWeight = function (t) {\n      return arguments.length ? (a = D(t), d) : a;\n    }, d.rotate = function (t) {\n      return arguments.length ? (i = D(t), d) : i;\n    }, d.text = function (t) {\n      return arguments.length ? (n = D(t), d) : n;\n    }, d.spiral = function (t) {\n      return arguments.length ? (f = F[t] || t, d) : f;\n    }, d.fontSize = function (t) {\n      return arguments.length ? (e = D(t), d) : e;\n    }, d.padding = function (t) {\n      return arguments.length ? (u = D(t), d) : u;\n    }, d.random = function (t) {\n      return arguments.length ? (h = t, d) : h;\n    }, d.on = function () {\n      var t = c.on.apply(c, arguments);\n      return t === c ? d : t;\n    }, d;\n  }() : h()).size(u).padding(B).words(d(X)).rotate(function () {\n    return void 0 === J ? 30 * (~~(6 * Y()) - 3) : function (t, n, r) {\n      if (t < 1) return 0;\n      var e = [];\n      if (1 === t) e = [n[0]];else {\n        e = [].concat(n);\n\n        for (var o = (n[1] - n[0]) / (t - 1), a = n[0] + o; a < n[1];) e.push(a), a += o;\n      }\n      return P(e, r);\n    }(J, K, Y);\n  }).spiral(Q).random(Y).text(N).font(w).fontStyle(z).fontWeight(H), function t(e, u) {\n    void 0 === u && (u = 1), x && n.revive(), n.fontSize(function (t) {\n      return function (t, n, r) {\n        var e,\n            o = l(t, function (t) {\n          return Number(t.value);\n        }),\n            a = s(t, function (t) {\n          return Number(t.value);\n        });\n\n        switch (r) {\n          case \"log\":\n            e = b;\n            break;\n\n          case \"sqrt\":\n            e = g;\n            break;\n\n          case \"linear\":\n          default:\n            e = v;\n        }\n\n        return e().domain([o, a]).range(n);\n      }(X, e, V)(t.value);\n    }).on(\"end\", function (n) {\n      if (X.length !== n.length && u <= 10) {\n        10 === u && console.warn(\"Unable to layout \" + (X.length - n.length) + \" word(s) after \" + u + \" attempts.  Consider: (1) Increasing the container/component size. (2) Lowering the max font size. (3) Limiting the rotation angles.\");\n        var f = Math.max(.95 * e[0], 1);\n        t([f, Math.max(.95 * e[1], f)], u + 1);\n      } else !function (t) {\n        var n,\n            r = t.callbacks,\n            e = t.options,\n            o = t.random,\n            a = t.words,\n            u = r.getWordColor,\n            f = r.getWordTooltip,\n            l = r.onWordClick,\n            s = r.onWordMouseOver,\n            c = r.onWordMouseOut,\n            h = e.colors,\n            d = e.enableTooltip,\n            m = e.fontStyle,\n            p = e.fontWeight,\n            x = e.textAttributes,\n            v = e.tooltipOptions,\n            g = e.fontFamily,\n            b = e.transitionDuration;\n\n        function w(t) {\n          return u ? u(t) : P(h, o);\n        }\n\n        t.selection.selectAll(\"text\").data(a).join(function (t) {\n          var r = t.append(\"text\").on(\"click\", function (t) {\n            l && l(t, i);\n          }).on(\"mouseover\", function (t) {\n            d && (n = y(i.target, M({\n              animation: \"scale\",\n              arrow: !0,\n              content: function () {\n                return f(t);\n              }\n            }, v))), s && s(t, i);\n          }).on(\"mouseout\", function (t) {\n            n && n.destroy(), c && c(t, i);\n          }).attr(\"cursor\", l ? \"pointer\" : \"default\").attr(\"fill\", w).attr(\"font-family\", g).attr(\"font-style\", m).attr(\"font-weight\", p).attr(\"text-anchor\", \"middle\").attr(\"transform\", \"translate(0, 0) rotate(0)\");\n          \"object\" == typeof x && Object.keys(x).forEach(function (t) {\n            r = r.attr(t, x[t]);\n          }), r = r.call(function (t) {\n            return t.transition().duration(b).attr(\"font-size\", L).attr(\"transform\", R).text(N);\n          });\n        }, function (t) {\n          t.transition().duration(b).attr(\"fill\", w).attr(\"font-family\", g).attr(\"font-size\", L).attr(\"transform\", R).text(N);\n        }, function (t) {\n          t.transition().duration(b).attr(\"fill-opacity\", 0).remove();\n        });\n      }({\n        callbacks: r,\n        options: o,\n        random: Y,\n        selection: a,\n        words: n\n      });\n    }).start();\n  }(U);\n}\n\nvar H = {\n  getWordTooltip: function (t) {\n    return t.text + \" (\" + t.value + \")\";\n  }\n},\n    B = {\n  colors: f(20).map(function (t) {\n    return t.toString();\n  }).map(x(w)),\n  deterministic: !1,\n  enableOptimizations: !1,\n  enableTooltip: !0,\n  fontFamily: \"times new roman\",\n  fontSizes: [4, 32],\n  fontStyle: \"normal\",\n  fontWeight: \"normal\",\n  padding: 1,\n  rotationAngles: [-90, 90],\n  scale: \"sqrt\",\n  spiral: \"rectangular\",\n  tooltipOptions: {},\n  transitionDuration: 600\n};\n\nfunction G(i) {\n  var f = i.callbacks,\n      l = i.maxWords,\n      s = void 0 === l ? 100 : l,\n      c = i.minSize,\n      h = i.options,\n      d = i.size,\n      m = i.words,\n      y = function (t, n) {\n    if (null == t) return {};\n    var r,\n        e,\n        o = {},\n        a = Object.keys(t);\n\n    for (e = 0; e < a.length; e++) n.indexOf(r = a[e]) >= 0 || (o[r] = t[r]);\n\n    return o;\n  }(i, [\"callbacks\", \"maxWords\", \"minSize\", \"options\", \"size\", \"words\"]),\n      p = M({}, H, f),\n      x = M({}, B, h),\n      v = function (t, n, i) {\n    var f = r(),\n        l = e(n),\n        s = l[0],\n        c = l[1],\n        h = e(null),\n        d = h[0],\n        m = h[1];\n    return o(function () {\n      var r = f.current,\n          e = a(r).append(\"svg\").style(\"display\", \"block\");\n      \"object\" == typeof i && Object.keys(i).forEach(function (t) {\n        e = e.attr(t, i[t]);\n      });\n      var o = e.append(\"g\");\n\n      function l(t, n) {\n        e.attr(\"height\", n).attr(\"width\", t), o.attr(\"transform\", \"translate(\" + t / 2 + \", \" + n / 2 + \")\"), c([t, n]);\n      }\n\n      m(o);\n      var s = 0,\n          h = 0;\n      void 0 === n ? (s = r.parentElement.offsetWidth, h = r.parentElement.offsetHeight) : (s = n[0], h = n[1]), l(s = Math.max(s, t[0]), h = Math.max(h, t[1]));\n      var d = new u(function (t) {\n        if (t && 0 !== t.length && void 0 === n) {\n          var r = t[0].contentRect;\n          l(r.width, r.height);\n        }\n      });\n      return d.observe(r), function () {\n        d.unobserve(r), a(r).selectAll(\"*\").remove();\n      };\n    }, [n, t, i]), [f, d, s];\n  }(c, d, h.svgAttributes),\n      g = v[0],\n      b = v[1],\n      w = v[2],\n      z = r(t(U, 100));\n\n  return o(function () {\n    b && z.current({\n      callbacks: p,\n      maxWords: s,\n      options: x,\n      selection: b,\n      size: w,\n      words: m\n    });\n  }, [s, p, x, b, w, m]), n.createElement(\"div\", M({\n    ref: g,\n    style: {\n      height: \"100%\",\n      width: \"100%\"\n    }\n  }, y));\n}\n\nG.defaultProps = {\n  callbacks: H,\n  maxWords: 100,\n  minSize: [300, 300],\n  options: B\n};\nexport default G;\nexport { H as defaultCallbacks, B as defaultOptions };","map":{"version":3,"sources":["../src/optimized-d3-cloud.js","../src/utils.js","../src/layout.js","../src/index.js","../src/hooks.js"],"names":["cloudRadians","Math","PI","size","text","cloudText","font","cloudFont","fontSize","cloudFontSize","fontStyle","cloudFontNormal","fontWeight","rotate","cloudRotate","padding","cloudPadding","spiral","archimedeanSpiral","words","timeInterval","Infinity","event","dispatch","random","cloud","canvas","cloudCanvas","killed","_","arguments","length","functor","start","contextAndRatio","getContext","board","bounds","tags","data","map","d","i","call","this","style","weight","sort","a","b","from","to","x","y","cloudSprite","hasText","place","push","cloudBounds","x0","y0","x1","y1","loop","min","multiStep","setTimeout","stop","revive","width","height","ratio","sqrt","getImageData","context","fillStyle","strokeStyle","textAlign","tag","perimeter","startX","startY","maxDelta","s","dt","t","dxdy","dx","dy","abs","cloudCollide","sprite","w","sw","lx","sx","msx","h","last","j","spirals","on","value","apply","di","c","clearRect","maxh","n","save","measureText","sr","sin","cr","cos","wcr","wsr","hcr","hsr","max","cw","translate","fillText","lineWidth","strokeText","restore","xoff","yoff","pixels","w32","seen","seenRow","m","slice","b0","b1","e","sign","Uint32Array","document","createElement","archimedean","rectangular","choose","array","floor","range","number","toString","scaleOrdinal","schemeCategory10","fontSizes","scale","minSize","Number","word","maxSize","scaleFunction","scaleLog","scaleSqrt","scaleLinear","domain","getFontSize","getText","getTransform","rotations","rotationAngles","angles","increment","angle","callbacks","options","selection","getWordColor","getWordTooltip","onWordClick","onWordMouseOver","onWordMouseOut","colors","enableTooltip","textAttributes","tooltipOptions","fontFamily","transitionDuration","getFill","tooltipInstance","selectAll","join","enter","append","tippy","target","animation","arrow","content","destroy","attr","Object","keys","forEach","key","transition","duration","update","exit","remove","layout","maxWords","deterministic","enableOptimizations","randomSeed","sortedWords","concat","descending","seedrandom","optimizedD3Cloud","d3Cloud","clonedeep","undefined","draw","attempts","getFontScale","computedWords","console","warn","minFontSize","render","defaultCallbacks","defaultOptions","ReactWordCloud","initialSize","rest","mergedCallbacks","mergedOptions","ref","useResponsiveSvgSelection","svgAttributes","useRef","debounce","useEffect","current","React","defaultProps","elementRef","setSize","useState","setSelection","element","svg","select","updateSize","parentElement","offsetWidth","offsetHeight","resizeObserver","ResizeObserver","entries","contentRect","observe","unobserve"],"mappings":"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","sourcesContent":["// @ts-nocheck\n/**\n * Author: Augustinas (https://github.com/WhoAteDaCake)\n * Source: https://github.com/chrisrzhou/react-wordcloud/blob/166d0b0400a87647fe4e7855a26fe581ce38a502/src/cloud.ts\n * TEMPORARY workaround\n *\n * Implements the wordcloud algorithm based on: https://github.com/jasondavies/d3-cloud/tree/v1.2.5\n * Improvements:\n *  Use a setTimeout + batch sizes to calculate clouds in order to avoid blocking main thread for two long (87-101)\n *\n */\n\n// Word cloud layout by Jason Davies, https://www.jasondavies.com/wordcloud/\n// Algorithm due to Jonathan Feinberg, http://static.mrfeinberg.com/bv_ch03.pdf\n\nimport { dispatch } from 'd3-dispatch';\n\nconst cloudRadians = Math.PI / 180,\n  cw = (1 << 11) >> 5,\n  ch = 1 << 11;\n\nexport default function Cloud() {\n  let size = [256, 256],\n    text = cloudText,\n    font = cloudFont,\n    fontSize = cloudFontSize,\n    fontStyle = cloudFontNormal,\n    fontWeight = cloudFontNormal,\n    rotate = cloudRotate,\n    padding = cloudPadding,\n    spiral = archimedeanSpiral,\n    words = [],\n    timeInterval = Infinity,\n    event = dispatch('word', 'end'),\n    timer = null,\n    random = Math.random,\n    cloud = {},\n    canvas = cloudCanvas;\n\n  let killed = false;\n\n  cloud.canvas = function(_) {\n    return arguments.length ? ((canvas = functor(_)), cloud) : canvas;\n  };\n\n  cloud.start = function() {\n    let contextAndRatio = getContext(canvas()),\n      board = zeroArray((size[0] >> 5) * size[1]),\n      bounds = null,\n      n = words.length,\n      i = -1,\n      tags = [],\n      data = words\n        .map(function(d, i) {\n          d.text = text.call(this, d, i);\n          d.font = font.call(this, d, i);\n          d.style = fontStyle.call(this, d, i);\n          d.weight = fontWeight.call(this, d, i);\n          d.rotate = rotate.call(this, d, i);\n          d.size = ~~fontSize.call(this, d, i);\n          d.padding = padding.call(this, d, i);\n          return d;\n        })\n        .sort(function(a, b) {\n          return b.size - a.size;\n        });\n\n    // Added by react-wordcloud\n    // Allows to calculate a subset of data instead of all of the words at once\n    function multiStep(from, to) {\n      for (let i = from; i < to; i += 1) {\n        const d = data[i];\n        d.x = (size[0] * (random() + 0.5)) >> 1;\n        d.y = (size[1] * (random() + 0.5)) >> 1;\n        cloudSprite(contextAndRatio, d, data, i);\n        if (d.hasText && place(board, d, bounds)) {\n          tags.push(d);\n          event.call('word', cloud, d);\n          if (bounds) cloudBounds(bounds, d);\n          else\n            bounds = [\n              { x: d.x + d.x0, y: d.y + d.y0 },\n              { x: d.x + d.x1, y: d.y + d.y1 },\n            ];\n          // Temporary hack\n          d.x -= size[0] >> 1;\n          d.y -= size[1] >> 1;\n        }\n      }\n    }\n\n    // Added by react-wordcloud\n    // Iterates dataset using setTimeout in order to prevent blocking of the main thread\n    function loop(i) {\n      const step = 50;\n      const from = i * step;\n      const to = Math.min((i + 1) * step, words.length);\n      multiStep(from, to);\n      if (killed) {\n        return;\n      }\n      if (to < words.length) {\n        setTimeout(() => loop(i + 1), 0);\n      } else {\n        cloud.stop();\n        event.call('end', cloud, tags, bounds);\n      }\n    }\n    setTimeout(() => loop(0), 0);\n\n    return cloud;\n  };\n\n  cloud.revive = () => {\n    killed = false;\n    return cloud;\n  };\n\n  cloud.stop = function() {\n    if (timer) {\n      clearInterval(timer);\n      timer = null;\n    }\n    killed = true;\n    return cloud;\n  };\n\n  function getContext(canvas) {\n    canvas.width = canvas.height = 1;\n    const ratio = Math.sqrt(\n      canvas.getContext('2d').getImageData(0, 0, 1, 1).data.length >> 2,\n    );\n    canvas.width = (cw << 5) / ratio;\n    canvas.height = ch / ratio;\n\n    const context = canvas.getContext('2d');\n    context.fillStyle = context.strokeStyle = 'red';\n    context.textAlign = 'center';\n\n    return { context: context, ratio: ratio };\n  }\n\n  function place(board, tag, bounds) {\n    let perimeter = [{ x: 0, y: 0 }, { x: size[0], y: size[1] }],\n      startX = tag.x,\n      startY = tag.y,\n      maxDelta = Math.sqrt(size[0] * size[0] + size[1] * size[1]),\n      s = spiral(size),\n      dt = random() < 0.5 ? 1 : -1,\n      t = -dt,\n      dxdy,\n      dx,\n      dy;\n\n    while ((dxdy = s((t += dt)))) {\n      dx = ~~dxdy[0];\n      dy = ~~dxdy[1];\n\n      if (Math.min(Math.abs(dx), Math.abs(dy)) >= maxDelta) break;\n\n      tag.x = startX + dx;\n      tag.y = startY + dy;\n\n      if (\n        tag.x + tag.x0 < 0 ||\n        tag.y + tag.y0 < 0 ||\n        tag.x + tag.x1 > size[0] ||\n        tag.y + tag.y1 > size[1]\n      )\n        continue;\n      // TODO only check for collisions within current bounds.\n      if (!bounds || !cloudCollide(tag, board, size[0])) {\n        if (!bounds || collideRects(tag, bounds)) {\n          var sprite = tag.sprite,\n            w = tag.width >> 5,\n            sw = size[0] >> 5,\n            lx = tag.x - (w << 4),\n            sx = lx & 0x7f,\n            msx = 32 - sx,\n            h = tag.y1 - tag.y0,\n            x = (tag.y + tag.y0) * sw + (lx >> 5),\n            last;\n          for (let j = 0; j < h; j++) {\n            last = 0;\n            for (let i = 0; i <= w; i++) {\n              board[x + i] |=\n                (last << msx) | (i < w ? (last = sprite[j * w + i]) >>> sx : 0);\n            }\n            x += sw;\n          }\n          delete tag.sprite;\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  cloud.timeInterval = function(_) {\n    return arguments.length\n      ? ((timeInterval = _ == null ? Infinity : _), cloud)\n      : timeInterval;\n  };\n\n  cloud.words = function(_) {\n    return arguments.length ? ((words = _), cloud) : words;\n  };\n\n  cloud.size = function(_) {\n    return arguments.length ? ((size = [+_[0], +_[1]]), cloud) : size;\n  };\n\n  cloud.font = function(_) {\n    return arguments.length ? ((font = functor(_)), cloud) : font;\n  };\n\n  cloud.fontStyle = function(_) {\n    return arguments.length ? ((fontStyle = functor(_)), cloud) : fontStyle;\n  };\n\n  cloud.fontWeight = function(_) {\n    return arguments.length ? ((fontWeight = functor(_)), cloud) : fontWeight;\n  };\n\n  cloud.rotate = function(_) {\n    return arguments.length ? ((rotate = functor(_)), cloud) : rotate;\n  };\n\n  cloud.text = function(_) {\n    return arguments.length ? ((text = functor(_)), cloud) : text;\n  };\n\n  cloud.spiral = function(_) {\n    return arguments.length ? ((spiral = spirals[_] || _), cloud) : spiral;\n  };\n\n  cloud.fontSize = function(_) {\n    return arguments.length ? ((fontSize = functor(_)), cloud) : fontSize;\n  };\n\n  cloud.padding = function(_) {\n    return arguments.length ? ((padding = functor(_)), cloud) : padding;\n  };\n\n  cloud.random = function(_) {\n    return arguments.length ? ((random = _), cloud) : random;\n  };\n\n  cloud.on = function() {\n    const value = event.on.apply(event, arguments);\n    return value === event ? cloud : value;\n  };\n\n  return cloud;\n}\n\nfunction cloudText(d) {\n  return d.text;\n}\n\nfunction cloudFont() {\n  return 'serif';\n}\n\nfunction cloudFontNormal() {\n  return 'normal';\n}\n\nfunction cloudFontSize(d) {\n  return Math.sqrt(d.value);\n}\n\nfunction cloudRotate() {\n  return (~~(Math.random() * 6) - 3) * 30;\n}\n\nfunction cloudPadding() {\n  return 1;\n}\n\n// Fetches a monochrome sprite bitmap for the specified text.\n// Load in batches for speed.\nfunction cloudSprite(contextAndRatio, d, data, di) {\n  if (d.sprite) return;\n  const c = contextAndRatio.context,\n    ratio = contextAndRatio.ratio;\n\n  c.clearRect(0, 0, (cw << 5) / ratio, ch / ratio);\n  let x = 0,\n    y = 0,\n    maxh = 0,\n    n = data.length;\n  --di;\n  while (++di < n) {\n    d = data[di];\n    c.save();\n    c.font =\n      d.style +\n      ' ' +\n      d.weight +\n      ' ' +\n      ~~((d.size + 1) / ratio) +\n      'px ' +\n      d.font;\n    var w = c.measureText(d.text + 'm').width * ratio,\n      h = d.size << 1;\n    if (d.rotate) {\n      const sr = Math.sin(d.rotate * cloudRadians),\n        cr = Math.cos(d.rotate * cloudRadians),\n        wcr = w * cr,\n        wsr = w * sr,\n        hcr = h * cr,\n        hsr = h * sr;\n      w =\n        ((Math.max(Math.abs(wcr + hsr), Math.abs(wcr - hsr)) + 0x1f) >> 5) << 5;\n      h = ~~Math.max(Math.abs(wsr + hcr), Math.abs(wsr - hcr));\n    } else {\n      w = ((w + 0x1f) >> 5) << 5;\n    }\n    if (h > maxh) maxh = h;\n    if (x + w >= cw << 5) {\n      x = 0;\n      y += maxh;\n      maxh = 0;\n    }\n    if (y + h >= ch) break;\n    c.translate((x + (w >> 1)) / ratio, (y + (h >> 1)) / ratio);\n    if (d.rotate) c.rotate(d.rotate * cloudRadians);\n    c.fillText(d.text, 0, 0);\n\n    if (d.padding) {\n      c.lineWidth = 2 * d.padding;\n      c.strokeText(d.text, 0, 0);\n    }\n    c.restore();\n    d.width = w;\n    d.height = h;\n    d.xoff = x;\n    d.yoff = y;\n    d.x1 = w >> 1;\n    d.y1 = h >> 1;\n    d.x0 = -d.x1;\n    d.y0 = -d.y1;\n    d.hasText = true;\n    x += w;\n  }\n  const pixels = c.getImageData(0, 0, (cw << 5) / ratio, ch / ratio).data,\n    sprite = [];\n  while (--di >= 0) {\n    d = data[di];\n    if (!d.hasText) continue;\n    var w = d.width,\n      w32 = w >> 5,\n      h = d.y1 - d.y0;\n    // Zero the buffer\n    for (var i = 0; i < h * w32; i++) sprite[i] = 0;\n    x = d.xoff;\n    if (x == null) return;\n    y = d.yoff;\n    let seen = 0,\n      seenRow = -1;\n    for (let j = 0; j < h; j++) {\n      for (var i = 0; i < w; i++) {\n        const k = w32 * j + (i >> 5),\n          m = pixels[((y + j) * (cw << 5) + (x + i)) << 2]\n            ? 1 << (31 - (i % 32))\n            : 0;\n        sprite[k] |= m;\n        seen |= m;\n      }\n      if (seen) seenRow = j;\n      else {\n        d.y0++;\n        h--;\n        j--;\n        y++;\n      }\n    }\n    d.y1 = d.y0 + seenRow;\n    d.sprite = sprite.slice(0, (d.y1 - d.y0) * w32);\n  }\n}\n\n// Use mask-based collision detection.\nfunction cloudCollide(tag, board, sw) {\n  sw >>= 5;\n  let sprite = tag.sprite,\n    w = tag.width >> 5,\n    lx = tag.x - (w << 4),\n    sx = lx & 0x7f,\n    msx = 32 - sx,\n    h = tag.y1 - tag.y0,\n    x = (tag.y + tag.y0) * sw + (lx >> 5),\n    last;\n  for (let j = 0; j < h; j++) {\n    last = 0;\n    for (let i = 0; i <= w; i++) {\n      if (\n        ((last << msx) | (i < w ? (last = sprite[j * w + i]) >>> sx : 0)) &\n        board[x + i]\n      )\n        return true;\n    }\n    x += sw;\n  }\n  return false;\n}\n\nfunction cloudBounds(bounds, d) {\n  const b0 = bounds[0],\n    b1 = bounds[1];\n  if (d.x + d.x0 < b0.x) b0.x = d.x + d.x0;\n  if (d.y + d.y0 < b0.y) b0.y = d.y + d.y0;\n  if (d.x + d.x1 > b1.x) b1.x = d.x + d.x1;\n  if (d.y + d.y1 > b1.y) b1.y = d.y + d.y1;\n}\n\nfunction collideRects(a, b) {\n  return (\n    a.x + a.x1 > b[0].x &&\n    a.x + a.x0 < b[1].x &&\n    a.y + a.y1 > b[0].y &&\n    a.y + a.y0 < b[1].y\n  );\n}\n\nfunction archimedeanSpiral(size) {\n  const e = size[0] / size[1];\n  return function(t) {\n    return [e * (t *= 0.1) * Math.cos(t), t * Math.sin(t)];\n  };\n}\n\nfunction rectangularSpiral(size) {\n  let dy = 4,\n    dx = (dy * size[0]) / size[1],\n    x = 0,\n    y = 0;\n  return function(t) {\n    const sign = t < 0 ? -1 : 1;\n    // See triangular numbers: T_n = n * (n + 1) / 2.\n    switch ((Math.sqrt(1 + 4 * sign * t) - sign) & 3) {\n      case 0:\n        x += dx;\n        break;\n      case 1:\n        y += dy;\n        break;\n      case 2:\n        x -= dx;\n        break;\n      default:\n        y -= dy;\n        break;\n    }\n    return [x, y];\n  };\n}\n\nfunction zeroArray(n) {\n  const a = new Uint32Array(n);\n  return a;\n}\n\nfunction cloudCanvas() {\n  return document.createElement('canvas');\n}\n\nfunction functor(d) {\n  return typeof d === 'function'\n    ? d\n    : function() {\n        return d;\n      };\n}\n\nvar spirals = {\n  archimedean: archimedeanSpiral,\n  rectangular: rectangularSpiral,\n};\n","import { max, min, range } from 'd3-array';\nimport { scaleLinear, scaleLog, scaleOrdinal, scaleSqrt } from 'd3-scale';\nimport { schemeCategory10 } from 'd3-scale-chromatic';\n\nexport function choose(array, random) {\n  return array[Math.floor(random() * array.length)];\n}\n\nexport function getDefaultColors() {\n  return range(20)\n    .map(number => number.toString())\n    .map(scaleOrdinal(schemeCategory10));\n}\n\nexport function getFontScale(words, fontSizes, scale) {\n  const minSize = min(words, word => Number(word.value));\n  const maxSize = max(words, word => Number(word.value));\n  let scaleFunction;\n  switch (scale) {\n    case 'log':\n      scaleFunction = scaleLog;\n      break;\n    case 'sqrt':\n      scaleFunction = scaleSqrt;\n      break;\n    case 'linear':\n    default:\n      scaleFunction = scaleLinear;\n      break;\n  }\n\n  const fontScale = scaleFunction()\n    .domain([minSize, maxSize])\n    .range(fontSizes);\n  return fontScale;\n}\n\nexport function getFontSize(word) {\n  return `${word.size}px`;\n}\n\nexport function getText(word) {\n  return word.text;\n}\n\nexport function getTransform(word) {\n  const translate = `translate(${word.x}, ${word.y})`;\n  const rotate =\n    typeof word.rotate === 'number' ? `rotate(${word.rotate})` : '';\n  return translate + rotate;\n}\n\nexport function rotate(rotations, rotationAngles, random) {\n  if (rotations < 1) {\n    return 0;\n  }\n\n  let angles = [];\n  if (rotations === 1) {\n    angles = [rotationAngles[0]];\n  } else {\n    angles = [...rotationAngles];\n    const increment = (rotationAngles[1] - rotationAngles[0]) / (rotations - 1);\n    let angle = rotationAngles[0] + increment;\n    while (angle < rotationAngles[1]) {\n      angles.push(angle);\n      angle += increment;\n    }\n  }\n\n  return choose(angles, random);\n}\n","import 'd3-transition';\n\nimport { descending } from 'd3-array';\nimport d3Cloud from 'd3-cloud';\nimport { event } from 'd3-selection';\nimport clonedeep from 'lodash.clonedeep';\nimport seedrandom from 'seedrandom';\nimport tippy from 'tippy.js';\n\nimport optimizedD3Cloud from './optimized-d3-cloud';\nimport {\n  choose,\n  getFontScale,\n  getFontSize,\n  getText,\n  getTransform,\n  rotate,\n} from './utils';\n\nexport function render({ callbacks, options, random, selection, words }) {\n  const {\n    getWordColor,\n    getWordTooltip,\n    onWordClick,\n    onWordMouseOver,\n    onWordMouseOut,\n  } = callbacks;\n  const {\n    colors,\n    enableTooltip,\n    fontStyle,\n    fontWeight,\n    textAttributes,\n    tooltipOptions,\n  } = options;\n  const { fontFamily, transitionDuration } = options;\n\n  function getFill(word) {\n    return getWordColor ? getWordColor(word) : choose(colors, random);\n  }\n\n  // Load words\n  let tooltipInstance;\n  const vizWords = selection.selectAll('text').data(words);\n  vizWords.join(\n    enter => {\n      let text = enter\n        .append('text')\n        .on('click', word => {\n          if (onWordClick) {\n            onWordClick(word, event);\n          }\n        })\n        .on('mouseover', word => {\n          if (enableTooltip) {\n            tooltipInstance = tippy(event.target, {\n              animation: 'scale',\n              arrow: true,\n              content: () => getWordTooltip(word),\n              ...tooltipOptions,\n            });\n          }\n\n          if (onWordMouseOver) {\n            onWordMouseOver(word, event);\n          }\n        })\n        .on('mouseout', word => {\n          if (tooltipInstance) {\n            tooltipInstance.destroy();\n          }\n\n          if (onWordMouseOut) {\n            onWordMouseOut(word, event);\n          }\n        })\n        .attr('cursor', onWordClick ? 'pointer' : 'default')\n        .attr('fill', getFill)\n        .attr('font-family', fontFamily)\n        .attr('font-style', fontStyle)\n        .attr('font-weight', fontWeight)\n        .attr('text-anchor', 'middle')\n        .attr('transform', 'translate(0, 0) rotate(0)');\n\n      if (typeof textAttributes === 'object') {\n        Object.keys(textAttributes).forEach(key => {\n          text = text.attr(key, textAttributes[key]);\n        });\n      }\n\n      text = text.call(enter =>\n        enter\n          .transition()\n          .duration(transitionDuration)\n          .attr('font-size', getFontSize)\n          .attr('transform', getTransform)\n          .text(getText),\n      );\n    },\n    update => {\n      update\n        .transition()\n        .duration(transitionDuration)\n        .attr('fill', getFill)\n        .attr('font-family', fontFamily)\n        .attr('font-size', getFontSize)\n        .attr('transform', getTransform)\n        .text(getText);\n    },\n    exit => {\n      exit\n        .transition()\n        .duration(transitionDuration)\n        .attr('fill-opacity', 0)\n        .remove();\n    },\n  );\n}\n\nexport function layout({\n  callbacks,\n  maxWords,\n  options,\n  selection,\n  size,\n  words,\n}) {\n  const MAX_LAYOUT_ATTEMPTS = 10;\n  const SHRINK_FACTOR = 0.95;\n  const {\n    deterministic,\n    enableOptimizations,\n    fontFamily,\n    fontStyle,\n    fontSizes,\n    fontWeight,\n    padding,\n    randomSeed,\n    rotations,\n    rotationAngles,\n    spiral,\n    scale,\n  } = options;\n\n  const sortedWords = words\n    .concat()\n    .sort((x, y) => descending(x.value, y.value))\n    .slice(0, maxWords);\n\n  const random = seedrandom(\n    deterministic ? randomSeed || 'deterministic' : null,\n  );\n\n  let cloud;\n  if (enableOptimizations) {\n    cloud = optimizedD3Cloud();\n  } else {\n    cloud = d3Cloud();\n  }\n\n  cloud\n    .size(size)\n    // @ts-ignore\n    .padding(padding)\n    .words(clonedeep(sortedWords))\n    .rotate(() => {\n      if (rotations === undefined) {\n        // Default rotation algorithm\n        return (~~(random() * 6) - 3) * 30;\n      }\n\n      return rotate(rotations, rotationAngles, random);\n    })\n    .spiral(spiral)\n    .random(random)\n    .text(getText)\n    .font(fontFamily)\n    .fontStyle(fontStyle)\n    .fontWeight(fontWeight);\n\n  function draw(fontSizes, attempts = 1) {\n    if (enableOptimizations) {\n      cloud.revive();\n    }\n\n    cloud\n      .fontSize(word => {\n        const fontScale = getFontScale(sortedWords, fontSizes, scale);\n        return fontScale(word.value);\n      })\n      .on('end', computedWords => {\n        /** KNOWN ISSUE: https://github.com/jasondavies/d3-cloud/issues/36\n         * Recursively layout and decrease font-sizes by a SHRINK_FACTOR.\n         * Bail out with a warning message after MAX_LAYOUT_ATTEMPTS.\n         */\n        if (\n          sortedWords.length !== computedWords.length &&\n          attempts <= MAX_LAYOUT_ATTEMPTS\n        ) {\n          if (attempts === MAX_LAYOUT_ATTEMPTS) {\n            console.warn(\n              `Unable to layout ${sortedWords.length -\n                computedWords.length} word(s) after ${attempts} attempts.  Consider: (1) Increasing the container/component size. (2) Lowering the max font size. (3) Limiting the rotation angles.`,\n            );\n          }\n\n          const minFontSize = Math.max(fontSizes[0] * SHRINK_FACTOR, 1);\n          const maxFontSize = Math.max(\n            fontSizes[1] * SHRINK_FACTOR,\n            minFontSize,\n          );\n\n          draw([minFontSize, maxFontSize], attempts + 1);\n        } else {\n          render({\n            callbacks,\n            options,\n            random,\n            selection,\n            words: computedWords,\n          });\n        }\n      })\n      .start();\n  }\n\n  draw(fontSizes);\n}\n","import debounce from 'lodash.debounce';\nimport React, { useEffect, useRef } from 'react';\n\nimport { useResponsiveSvgSelection } from './hooks';\nimport { layout } from './layout';\nimport { getDefaultColors } from './utils';\n\nexport const defaultCallbacks = {\n  getWordTooltip: ({ text, value }) => `${text} (${value})`,\n};\n\nexport const defaultOptions = {\n  colors: getDefaultColors(),\n  deterministic: false,\n  enableOptimizations: false,\n  enableTooltip: true,\n  fontFamily: 'times new roman',\n  fontSizes: [4, 32],\n  fontStyle: 'normal',\n  fontWeight: 'normal',\n  padding: 1,\n  rotationAngles: [-90, 90],\n  scale: 'sqrt',\n  spiral: 'rectangular',\n  tooltipOptions: {},\n  transitionDuration: 600,\n};\n\nfunction ReactWordCloud({\n  callbacks,\n  maxWords = 100,\n  minSize,\n  options,\n  size: initialSize,\n  words,\n  ...rest\n}) {\n  const mergedCallbacks = { ...defaultCallbacks, ...callbacks };\n  const mergedOptions = { ...defaultOptions, ...options };\n\n  const [ref, selection, size] = useResponsiveSvgSelection(\n    minSize,\n    initialSize,\n    options.svgAttributes,\n  );\n\n  const render = useRef(debounce(layout, 100));\n\n  useEffect(() => {\n    if (selection) {\n      render.current({\n        callbacks: mergedCallbacks,\n        maxWords,\n        options: mergedOptions,\n        selection,\n        size,\n        words,\n      });\n    }\n  }, [maxWords, mergedCallbacks, mergedOptions, selection, size, words]);\n\n  return <div ref={ref} style={{ height: '100%', width: '100%' }} {...rest} />;\n}\n\nReactWordCloud.defaultProps = {\n  callbacks: defaultCallbacks,\n  maxWords: 100,\n  minSize: [300, 300],\n  options: defaultOptions,\n};\n\nexport default ReactWordCloud;\n","import { select } from 'd3-selection';\nimport { useEffect, useRef, useState } from 'react';\nimport ResizeObserver from 'resize-observer-polyfill';\n\nexport function useResponsiveSvgSelection(minSize, initialSize, svgAttributes) {\n  const elementRef = useRef();\n  const [size, setSize] = useState(initialSize);\n  const [selection, setSelection] = useState(null);\n\n  useEffect(() => {\n    const element = elementRef.current;\n\n    // Set svg selection\n    let svg = select(element)\n      .append('svg')\n      .style('display', 'block'); // Native inline svg leaves undesired white space\n\n    if (typeof svgAttributes === 'object') {\n      Object.keys(svgAttributes).forEach(key => {\n        svg = svg.attr(key, svgAttributes[key]);\n      });\n    }\n\n    const selection = svg.append('g');\n    setSelection(selection);\n\n    function updateSize(width, height) {\n      svg.attr('height', height).attr('width', width);\n      selection.attr('transform', `translate(${width / 2}, ${height / 2})`);\n      setSize([width, height]);\n    }\n\n    let width = 0;\n    let height = 0;\n    if (initialSize === undefined) {\n      // Use parentNode size if resized has not occurred\n      width = element.parentElement.offsetWidth;\n      height = element.parentElement.offsetHeight;\n    } else {\n      // Use initialSize if it is provided\n      [width, height] = initialSize;\n    }\n\n    width = Math.max(width, minSize[0]);\n    height = Math.max(height, minSize[1]);\n    updateSize(width, height);\n\n    // Update resize using a resize observer\n    const resizeObserver = new ResizeObserver(entries => {\n      if (!entries || entries.length === 0) {\n        return;\n      }\n\n      if (initialSize === undefined) {\n        const { width, height } = entries[0].contentRect;\n        updateSize(width, height);\n      }\n    });\n    resizeObserver.observe(element);\n\n    // Cleanup\n    return () => {\n      resizeObserver.unobserve(element);\n      select(element)\n        .selectAll('*')\n        .remove();\n    };\n  }, [initialSize, minSize, svgAttributes]);\n\n  return [elementRef, selection, size];\n}\n"]},"metadata":{},"sourceType":"module"}