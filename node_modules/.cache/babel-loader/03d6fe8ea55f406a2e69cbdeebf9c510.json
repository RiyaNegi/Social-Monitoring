{"ast":null,"code":"import axios from \"axios\";\nimport axiosInstance from \"../../helpers/AxiosInstance\";\nimport { LOGIN_LOADING, LOGIN_SUCCESS, LOGIN_ERROR, LOGOUT_SUCCESS, LOGOUT_ERROR } from \"../../helpers/constants\";\nimport History from \"../../utils/history\";\nimport AxiosInstance from \"../../helpers/AxiosInstance\";\nexport const login = ({\n  email,\n  password\n}) => dispatch => {\n  dispatch({\n    type: LOGIN_LOADING\n  });\n  const options = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\"\n    }\n  };\n  console.log(email, password);\n  AxiosInstance.post(\"/auth\", JSON.stringify({\n    username: email,\n    password: password\n  })).then(res => {\n    console.log(\"succcesss bitccchh!!!\", res);\n    localStorage.setItem('token', res.data.access_token);\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: res.data\n    });\n    console.log(\"there??\", localStorage.token);\n    History.push('/dashboard');\n  }).catch(err => {\n    console.log(\"error bitccchh!!!\", err);\n    dispatch({\n      type: LOGIN_ERROR,\n      payload: err.response ? err.response.data : \"COULD NOT CONNECT\"\n    });\n  });\n};\nexport const logout = () => {\n  const options = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\"\n    }\n  }; // console.log(email, password)\n\n  window.localStorage.clear();\n  History.push('/login');\n  console.log(\"there??\", localStorage.token); // window.localStorage.removeItem(\"token\"); //remove one item\n  // axios.post(\"http://127.0.0.1:5000/auth\", JSON.stringify({\n  //   username: email,\n  //   password: password\n  // }), options)\n  //   .then((res) => {\n  //     console.log(\"succcesss bitccchh!!!\", res)\n  //     localStorage.setItem('token', res.data.token)\n  //     dispatch({\n  //       type: LOGIN_SUCCESS,\n  //       payload: res.data,\n  //     });\n  //     console.log(\"there??\", localStorage.token)\n  //     // History.push('/dashboard')\n  //   })\n  //   .catch((err) => {\n  //     console.log(\"error bitccchh!!!\", err)\n  //     dispatch({\n  //       type: LOGIN_ERROR,\n  //       payload: err.response ? err.response.data : \"COULD NOT CONNECT\",\n  //     });\n  //   })\n};","map":{"version":3,"sources":["/home/riya/social-monitoring/src/context/actions/auth.js"],"names":["axios","axiosInstance","LOGIN_LOADING","LOGIN_SUCCESS","LOGIN_ERROR","LOGOUT_SUCCESS","LOGOUT_ERROR","History","AxiosInstance","login","email","password","dispatch","type","options","headers","Accept","console","log","post","JSON","stringify","username","then","res","localStorage","setItem","data","access_token","payload","token","push","catch","err","response","logout","window","clear"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,aAAP,MAA0B,6BAA1B;AACA,SACEC,aADF,EAEEC,aAFF,EAGEC,WAHF,EAIEC,cAJF,EAKEC,YALF,QAMO,yBANP;AAOA,OAAOC,OAAP,MAAoB,qBAApB;AACA,OAAOC,aAAP,MAA0B,6BAA1B;AAIA,OAAO,MAAMC,KAAK,GAAG,CAAC;AAAEC,EAAAA,KAAF;AAASC,EAAAA;AAAT,CAAD,KAA0BC,QAAD,IAAc;AAC1DA,EAAAA,QAAQ,CAAC;AACPC,IAAAA,IAAI,EAAEX;AADC,GAAD,CAAR;AAGA,QAAMY,OAAO,GAAG;AACdC,IAAAA,OAAO,EAAE;AACP,sBAAgB,kBADT;AAEPC,MAAAA,MAAM,EAAE;AAFD;AADK,GAAhB;AAOAC,EAAAA,OAAO,CAACC,GAAR,CAAYR,KAAZ,EAAmBC,QAAnB;AAEAH,EAAAA,aAAa,CAACW,IAAd,CAAmB,OAAnB,EAA4BC,IAAI,CAACC,SAAL,CAAe;AACzCC,IAAAA,QAAQ,EAAEZ,KAD+B;AAEzCC,IAAAA,QAAQ,EAAEA;AAF+B,GAAf,CAA5B,EAIGY,IAJH,CAISC,GAAD,IAAS;AACbP,IAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAAqCM,GAArC;AACAC,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,GAAG,CAACG,IAAJ,CAASC,YAAvC;AACAhB,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAEV,aADC;AAEP0B,MAAAA,OAAO,EAAEL,GAAG,CAACG;AAFN,KAAD,CAAR;AAIAV,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBO,YAAY,CAACK,KAApC;AACAvB,IAAAA,OAAO,CAACwB,IAAR,CAAa,YAAb;AACD,GAbH,EAcGC,KAdH,CAcUC,GAAD,IAAS;AACdhB,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCe,GAAjC;AACArB,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAET,WADC;AAEPyB,MAAAA,OAAO,EAAEI,GAAG,CAACC,QAAJ,GAAeD,GAAG,CAACC,QAAJ,CAAaP,IAA5B,GAAmC;AAFrC,KAAD,CAAR;AAID,GApBH;AAqBD,CAlCM;AAoCP,OAAO,MAAMQ,MAAM,GAAG,MAAM;AAC1B,QAAMrB,OAAO,GAAG;AACdC,IAAAA,OAAO,EAAE;AACP,sBAAgB,kBADT;AAEPC,MAAAA,MAAM,EAAE;AAFD;AADK,GAAhB,CAD0B,CAQ1B;;AACAoB,EAAAA,MAAM,CAACX,YAAP,CAAoBY,KAApB;AACA9B,EAAAA,OAAO,CAACwB,IAAR,CAAa,QAAb;AACAd,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBO,YAAY,CAACK,KAApC,EAX0B,CAc1B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,CArCM","sourcesContent":["import axios from \"axios\";\nimport axiosInstance from \"../../helpers/AxiosInstance\";\nimport {\n  LOGIN_LOADING,\n  LOGIN_SUCCESS,\n  LOGIN_ERROR,\n  LOGOUT_SUCCESS,\n  LOGOUT_ERROR\n} from \"../../helpers/constants\";\nimport History from \"../../utils/history\";\nimport AxiosInstance from \"../../helpers/AxiosInstance\"\n\n\n\nexport const login = ({ email, password }) => (dispatch) => {\n  dispatch({\n    type: LOGIN_LOADING,\n  });\n  const options = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\"\n    }\n  };\n\n  console.log(email, password)\n\n  AxiosInstance.post(\"/auth\", JSON.stringify({\n    username: email,\n    password: password\n  }))\n    .then((res) => {\n      console.log(\"succcesss bitccchh!!!\", res)\n      localStorage.setItem('token', res.data.access_token)\n      dispatch({\n        type: LOGIN_SUCCESS,\n        payload: res.data,\n      });\n      console.log(\"there??\", localStorage.token)\n      History.push('/dashboard')\n    })\n    .catch((err) => {\n      console.log(\"error bitccchh!!!\", err)\n      dispatch({\n        type: LOGIN_ERROR,\n        payload: err.response ? err.response.data : \"COULD NOT CONNECT\",\n      });\n    })\n}\n\nexport const logout = () => {\n  const options = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\"\n    }\n  };\n\n  // console.log(email, password)\n  window.localStorage.clear();\n  History.push('/login')\n  console.log(\"there??\", localStorage.token)\n\n\n  // window.localStorage.removeItem(\"token\"); //remove one item\n\n  // axios.post(\"http://127.0.0.1:5000/auth\", JSON.stringify({\n  //   username: email,\n  //   password: password\n  // }), options)\n  //   .then((res) => {\n  //     console.log(\"succcesss bitccchh!!!\", res)\n  //     localStorage.setItem('token', res.data.token)\n  //     dispatch({\n  //       type: LOGIN_SUCCESS,\n  //       payload: res.data,\n  //     });\n  //     console.log(\"there??\", localStorage.token)\n  //     // History.push('/dashboard')\n  //   })\n  //   .catch((err) => {\n  //     console.log(\"error bitccchh!!!\", err)\n  //     dispatch({\n  //       type: LOGIN_ERROR,\n  //       payload: err.response ? err.response.data : \"COULD NOT CONNECT\",\n  //     });\n  //   })\n}\n\n\n"]},"metadata":{},"sourceType":"module"}